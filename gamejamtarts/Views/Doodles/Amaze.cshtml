   
<canvas id="canvas" width="820" height="400" style="border-bottom: 2px solid lime;">
    
</canvas>

<script type="text/javascript" src='@Url.Content("Scripts/easeljs-0.4.2.min.js")'></script>
<script type="text/javascript">
    var canvas;
    var stage;
    var scene;
    
    $(document).ready(function () {
        canvas = document.getElementById("canvas");
        stage = new Stage(canvas);

        scene = new Scene(stage, canvas.width, canvas.height);
        

        Ticker.addListener(tick);
        // Targeting 60 FPS
        Ticker.useRAF = true;
        Ticker.setFPS(60);
    });
    
    function tick() {
        scene.draw();
    }
    
    function Scene(stage, width, height) {
        this.Stage = stage;
        this.Width = width;
        this.Height = height;
        this.Blocks = [];
        
        // Load the amaze blocks
        var amaze_image = new Image();
        amaze_image.onload = function () {

            var amaze = new SpriteSheet({
                images: [amaze_image],
                frames: [// x, y, width, height, image index, regX, regY
                         [0, 0, 89, 110, 0, 44, 55],
                         [89, 0, 100, 110, 0, 44, 55],
                         [189, 0, 79, 110, 0, 44, 55],
                         [268, 0, 80, 110, 0, 44, 55],
                         [348, 0, 92, 110, 0, 44, 55]]
            });

            var x = 190, y = 140;
            for (var i = 0; i < 5; i++) {

                var frame = amaze.getFrame(i);
                var block = new Block(frame.image, x + frame.rect.x, y, frame.rect);
                //this.Blocks.push();
                stage.addChild(block);
            }
        };
        amaze_image.src = '@Url.Content("Content/Images/amaze_mask.png")';

        this.Pulse = new Pulse(0, height-20, 50, 25, 0, width);
        stage.addChild(this.Pulse);
    }
    Scene.prototype.draw = function () {
        this.Pulse.update();
        
        this.Stage.update();
    };
    
    function Block(image, x, y, rect) {
        this.initialize(image, x, y, rect);
    }
    Block.prototype = new Bitmap();
    Block.prototype.base_initialize = Block.prototype.initialize;
    Block.prototype.initialize = function (image, x, y, rect) {
        this.base_initialize(image);
        this.x = x;
        this.y = y;
        this.sourceRect = rect;
    };
    
    function Pulse(x, y, width, height, left, right) {
        this.initialize(x, y, width, height, left, right);
    }
    Pulse.prototype = new Shape();
    Pulse.prototype.base_initialize = Pulse.prototype.initialize;
    Pulse.prototype.initialize = function(x, y, width, height, left, right) {
        this.x = x;
        this.y = y;
        this.left = left;
        this.right = right;
        this.vx = 10;
        this.width = width;
        this.height = height;
         // only the drawPolyStar call is needed for the mask to work:
    };

    Pulse.prototype.update = function () {
        this.x += this.vx;
        
        if (this.x < this.left || this.x + this.width > this.right)
            this.vx *= -1;
        
        this.graphics.clear();
        this.graphics.beginStroke("lime").setStrokeStyle(3);
        this.graphics.moveTo(this.x, this.y);
        
        var dx = 0;
        while(dx < this.width) {
            dx += Math.random() * 15;
            dy = Math.random() * this.height;

            this.graphics.lineTo(dx, dy);
        }
    };



    
    
</script>
